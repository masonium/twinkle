* Absolute priority
+ [X] refactor material so reflectance takes an intersection and returns a specturm (no separate texture-at-point)

* TODO Visible Features
** Shapes
- [ ] box primitive
- [ ] heightmap (based on kd-mesh)
- [X] implicit built-ins
  - [X] torus
  - [X] rounded box
  - [X] capsule


** Materials
- [ ] rough glass material
- [ ] plastic (cook-torrance)

** Textures
- [X] image-based
- [X] function-based
- [ ] worley-noise
- [ ] new sky texture

** Renders
- [X] time-based debug renderer (intersection-only)

** Volume rendering !

* External Features
** Lua scripting(!!!)
- [-] basics (renderer, camera, render-options, sphere, implicit, rough-color material)
  - [X] camera
  - [X] sphere
  - [X] plane
  - [X] lights
  - [ ] envlights
  - [ ] color material
  - [X] implicit
- [X] push luastate into generic renderer

** Internal advancements
- [X] invert rendering algorithm (grid_render takes integrator as input, instead of reverse)
- [X] push scheduler as argument to renderer
- [X] lua state into
- [X] Mesh or KDMesh based on number of triangles
- [ ] condensing of nested transforms into transform shapes
  - [ ] RTTI for shapes (tagging)
- [X] cache-friendly 8-byte kdtree-node
- [ ] cache-coherent kd-tree (re)organization
- [ ] population monte-carlo for grid-render
- [ ] population monte-carlo for pixel-choice of direct lighting
- [ ] triangle fan implementation (faster mesh rendering)

* Scenes
- [X] 'showcase-scene': all available shapes
- [ ] building scene (large tower made of random blocks, two or three large ones primary-colored, smaller in background
- [ ] water-scene (height map with caustics)
